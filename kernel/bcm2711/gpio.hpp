#include <stdtypes.hpp>

#ifndef _BCM_2711_GPIO_H_
#define _BCM_2711_GPIO_H_

#define BCM2711_PERIPHERAL_BASE (0xFE000000)

typedef enum GPIOLocation
{
	BCM2711_GPIO_BASE = BCM2711_PERIPHERAL_BASE + 0x200000,

	/* Function select */
	BCM2711_GPFSEL0 = BCM2711_GPIO_BASE + 0x00,
	BCM2711_GPFSEL1 = BCM2711_GPIO_BASE + 0x04,
	BCM2711_GPFSEL2 = BCM2711_GPIO_BASE + 0x08,
	BCM2711_GPFSEL3 = BCM2711_GPIO_BASE + 0x0C,
	BCM2711_GPFSEL4 = BCM2711_GPIO_BASE + 0x10,
	BCM2711_GPFSEL5 = BCM2711_GPIO_BASE + 0x14,

	/* Output set */
	BCM2711_GPSET0 = BCM2711_GPIO_BASE + 0x1C,
	BCM2711_GPSET1 = BCM2711_GPIO_BASE + 0x20,

	/* Output clear */
	BCM2711_GPCLR0 = BCM2711_GPIO_BASE + 0x28,
	BCM2711_GPCLR1 = BCM2711_GPIO_BASE + 0x2C,

	/* Pin level */
	BCM2711_GPLEV0 = BCM2711_GPIO_BASE + 0x34,
	BCM2711_GPLEV1 = BCM2711_GPIO_BASE + 0x38,
	
	/* Event detect status */
	BCM2711_GPEDS0 = BCM2711_GPIO_BASE + 0x40,
	BCM2711_GPEDS1 = BCM2711_GPIO_BASE + 0x44,

	/* Rising edge detect */
	BCM2711_GPREN0 = BCM2711_GPIO_BASE + 0x4C,
	BCM2711_GPREN1 = BCM2711_GPIO_BASE + 0x50,

	/* Falling edge detect */
	BCM2711_GPFEN0 = BCM2711_GPIO_BASE + 0x58,
	BCM2711_GPFEN1 = BCM2711_GPIO_BASE + 0x5C,

	/* High detect */
	BCM2711_GPHEN0 = BCM2711_GPIO_BASE + 0x64,
	BCM2711_GPHEN1 = BCM2711_GPIO_BASE + 0x68,

	/* Low detect */
	BCM2711_GPLEN0 = BCM2711_GPIO_BASE + 0x70,
	BCM2711_GPLEN1 = BCM2711_GPIO_BASE + 0x74,

	/* Aasync rising edge */
	BCM2711_GPAREN0 = BCM2711_GPIO_BASE + 0x7C,
	BCM2711_GPAREN1 = BCM2711_GPIO_BASE + 0x80,

	/* Async falling edge */
	BCM2711_GPAFEN0 = BCM2711_GPIO_BASE + 0x88,
	BCM2711_GPAFEN1 = BCM2711_GPIO_BASE + 0x8C,

	/* Pull up/pull down registers */
	BCM2711_GPIO_PUP_PDN_CNTRL_REG0 = BCM2711_GPIO_BASE + 0xE4,
	BCM2711_GPIO_PUP_PDN_CNTRL_REG1 = BCM2711_GPIO_BASE + 0xE8,
	BCM2711_GPIO_PUP_PDN_CNTRL_REG2 = BCM2711_GPIO_BASE + 0xEC,
	BCM2711_GPIO_PUP_PDN_CNTRL_REG3 = BCM2711_GPIO_BASE + 0xF0,
}GPIOLocation;

/* See page 73, BCM2711 peripherals documentation. 
 * Needed for PIP_PDN_CNTRL_REGs. 
 */
typedef enum BCM2711PinUse
{
	BCM2711_PULL_NONE = 0x00,
	BCM2711_PULL_UP = 0x01,
	BCM2711_PULL_DOWN = 0x02,
	BCM2711_PULL_RESERVED = 0x03,
}BCM2711PinUse;

typedef enum BCM2711PinFunc
{
	BCM2711_MAX_PIN = 53,

	BCM2711_GPIO_FUNC_IN = 0b000,
	BCM2711_GPIO_FUNC_OUT = 0b001,
	BCM2711_GPIO_FUNC_ALT0 = 0b100,
	BCM2711_GPIO_FUNC_ALT1 = 0b101,
	BCM2711_GPIO_FUNC_ALT2 = 0b110,
	BCM2711_GPIO_FUNC_ALT3 = 0b111,
	BCM2711_GPIO_FUNC_ALT4 = 0b011,
	BCM2711_GPIO_FUNC_ALT5 = 0b010,
}BCM2711PinFunc;

VOID SetGPIOFunction(UINT16 PinNumber, 
	BCM2711PinUse Usage, BCM2711PinFunc PinFunc);



#endif